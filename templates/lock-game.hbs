<div class="lp-game-root">

  <h2 class="lp-title">{{localize "LOCKPICKING.Title"}}</h2>

  <div class="lp-meta">
    <div><b>{{actorName}}</b> {{localize "LOCKPICKING.Attempts"}}</div>

    <div class="lp-tags-row">
      <span class="lp-tag lp-tag--dc">DC: {{dc}}</span>
      <span class="lp-tag lp-tag--bonus">Bonus: {{bonus}}</span>

      {{!-- Reliable Talent anzeigen, wenn aktiv --}}
      {{#if reliableTalent}}
        <span class="lp-tag lp-tag--reliable">{{localize "LOCKPICKING.ReliableTalent"}}</span>
      {{/if}}

      {{#if disadvantage}}
        <span class="lp-tag lp-tag--bad">{{localize "LOCKPICKING.Disadvantage"}}</span>
      {{else}}
      <span class="lp-tag lp-tag--good">{{localize "LOCKPICKING.NoDisadvantage"}}</span>
      {{/if}}
    </div>

    {{!-- NEU: Explanations-Shield beginnt hier --}}
    <div class="lp-expl-shield">

      {{!-- Bonus-Zusammensetzung (DEX + Übung/Expertise) --}}
      {{#if bonusBreakdown}}
        <p class="lp-expl">
          {{localize "LOCKPICKING.BonusBreakdown"}}
          DEX {{numberFormat bonusBreakdown.dexMod sign=true}}
          {{#if bonusBreakdown.profPart}}
          + {{bonusBreakdown.profLabel}} {{numberFormat bonusBreakdown.profPart sign=true}}
          {{/if}}
          = <b>{{numberFormat bonusBreakdown.totalBonus sign=true}}</b>
        </p>
      {{/if}}

      {{!-- Erklärung Übungsbonus / Reliable Talent / Fehlversuche --}}
      {{#if reliableInfo}}
        <p class="lp-expl">
          {{{localize "LOCKPICKING.Explanation.Bonus" label=bonusBreakdown.profLabel bonus=reliableInfo.trainingBonus}}}
          
          {{#if reliableInfo.hasReliable}}
            {{{localize "LOCKPICKING.Explanation.Reliable" mistakes=reliableInfo.allowedMistakes}}}
          {{else}}
            {{{localize "LOCKPICKING.Explanation.NoReliable"}}}
          {{/if}}
        </p>
      {{/if}}

      <p class="lp-expl lp-expl--last">
        {{{localize "LOCKPICKING.Explanation.Instructions"}}}
      </p>

    </div>
    {{!-- Explanations-Shield endet hier --}}

  </div>

  <div class="lp-section">
    <div class="lp-section-label">{{localize "LOCKPICKING.Progress"}}</div>
    <div class="lp-timer-bar">
      <div class="lp-timer-fill"></div>
      <div class="lp-timer-text">0.0s</div>
    </div>
    <div class="lp-mistakes-info"></div>
  </div>

  <div class="lp-section">
    <div class="lp-section-label">{{localize "LOCKPICKING.Sequence"}}</div>
    <div class="lp-sequence-steps"></div>
  </div>

  <div class="lp-current-key-box">
    <div class="lp-current-key-icon">
      <div class="lp-current-key-pick"></div>
    </div>

    <div class="lp-current-key-arrow">
      <div class="lp-current-key-icon-inner" data-key=""></div>
    </div>

    <div class="lp-current-key-label">{{localize "LOCKPICKING.CurrentKey"}}</div>
  </div>

  <div class="lp-status-text">{{localize "LOCKPICKING.Ready"}}</div>

  <div class="lp-buttons">
    <button class="lp-btn lp-btn--primary" data-action="start-game">{{localize "LOCKPICKING.Start"}}</button>
    <button class="lp-btn" data-action="cancel-game">{{localize "LOCKPICKING.Cancel"}}</button>
  </div>

</div>
